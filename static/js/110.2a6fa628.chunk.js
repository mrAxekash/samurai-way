"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[110],{6110:function(e,t,s){s.r(t),s.d(t,{default:function(){return J}});var r=s(1413),o=s(5671),i=s(3144),a=s(136),n=s(5716),l=s(2791),u=s(5861),c=s(7757),p=s.n(c),d="ProfileInfo_profileDescription__PVm52",f="ProfileInfo_mainPhoto__+XkrS",h="ProfileInfo_contacts__gKKXI",x="ProfileInfo_error__13ngG",j=s(885),v=s(184),g=function(e){var t=(0,l.useState)(!1),s=(0,j.Z)(t,2),r=s[0],o=s[1],i=(0,l.useState)(e.userStatus),a=(0,j.Z)(i,2),n=a[0],u=a[1];(0,l.useEffect)((function(){u(e.userStatus)}),[e.userStatus]);return(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Status:"}),!r&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{onDoubleClick:function(){o(!0)},children:" ".concat(e.userStatus)||0})}),r&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("input",{onBlur:function(){o(!1),e.updateUserStatus(n)},autoFocus:!0,value:n,onChange:function(e){u(e.currentTarget.value)}})})]})},m=s(8389),b=s(5290),S=function(e){var t,s,o=(0,b.cI)({mode:"onBlur",defaultValues:{fullName:e.profile.fullName,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,contacts:e.profile.contacts}}),i=o.register,a=o.formState.errors,n=o.handleSubmit;o.reset,o.setError;return(0,v.jsxs)("form",{onSubmit:n((function(t){var s;null===(s=e.onSubmit)||void 0===s||s.call(e,t)})),children:[(0,v.jsx)("div",{children:null!==e.statusError?null===(t=e.statusError)||void 0===t?void 0:t.map((function(e){return(0,v.jsx)("p",{className:x,children:e})})):""}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",children:"Save profile"})}),(0,v.jsx)("div",{children:(0,v.jsx)("input",(0,r.Z)((0,r.Z)({},i("fullName",{value:e.profile.fullName,required:"This place is required"})),{},{type:"text"}))}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{children:(0,v.jsx)("b",{children:"Looking for a job: "})}),(0,v.jsx)("input",(0,r.Z)((0,r.Z)({},i("lookingForAJob",{})),{},{type:"checkbox"}))]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{children:[" ",(0,v.jsx)("b",{children:" My professional skills: "})," "]}),(0,v.jsx)("input",(0,r.Z)((0,r.Z)({},i("lookingForAJobDescription",{})),{},{type:"text",placeholder:"My professional skills"}))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{children:(0,v.jsx)("b",{children:"About me: "})}),(0,v.jsx)("input",(0,r.Z)((0,r.Z)({},i("aboutMe",{value:e.profile.aboutMe})),{},{type:"text",placeholder:"Tell us about yourself",className:a.aboutMe?a.aboutMe.message:""})),(0,v.jsx)("p",{className:a.aboutMe?a.aboutMe.message:"",children:null===(s=a.aboutMe)||void 0===s?void 0:s.message})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{children:(0,v.jsx)("b",{children:"My Contacts:"})}),(0,v.jsx)("div",{children:e.profile.contacts&&Object.keys(e.profile.contacts).map((function(t){return(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{children:(0,v.jsxs)("b",{children:[t,":"]})}),(0,v.jsx)("input",(0,r.Z)({type:"text"},i("contacts.".concat(t),{value:"".concat(e.profile.contacts,".").concat(t)})))]},t)}))})]})]})},P=function(e){var t,s=function(t){e.changeProfileUpdateStatusAC(t)},r=function(){var t=(0,u.Z)(p().mark((function t(s){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updateProfileData(s);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:d,children:[(0,v.jsx)("img",{src:(null===(t=e.profile.photos)||void 0===t?void 0:t.large)||m,className:f,alt:"#"}),e.isOwner&&(0,v.jsx)("input",{type:"file",onChange:function(t){var s;null!==(s=t.target.files)&&void 0!==s&&s.length&&e.savePhoto(t.target.files[0])}}),e.profileUpdateStatus?(0,v.jsx)(S,{onSubmit:r,profile:e.profile,isOwner:e.isOwner,toEditMode:s,profileUpdateStatus:e.profileUpdateStatus,changeProfileUpdateStatusAC:e.changeProfileUpdateStatusAC,statusError:e.statusError}):(0,v.jsx)(U,{profile:e.profile,isOwner:e.isOwner,toEditMode:s}),(0,v.jsx)(g,{userStatus:e.status,updateUserStatus:e.updateUserStatus})]})})},k=function(e){return(0,v.jsxs)("div",{className:h,children:[(0,v.jsxs)("b",{children:[e.contactTitle,": "]})," ",e.contactValue]})},U=function(e){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{children:e.isOwner&&(0,v.jsx)("button",{onClick:function(){return e.toEditMode(!0)},children:"Edit profile"})}),(0,v.jsx)("div",{children:(0,v.jsx)("h2",{children:e.profile.fullName})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job: "})," ",e.profile.lookingForAJob?"yes":"no"]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:" Looking for a job description: "})," ",e.profile.lookingForAJobDescription,"  "]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me: "})," ",e.profile.aboutMe]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My Contacts:"}),e.profile.contacts&&Object.keys(e.profile.contacts).map((function(t){var s;return(0,v.jsx)(k,{contactTitle:t,contactValue:null===(s=e.profile)||void 0===s?void 0:s.contacts[t]},t)}))]})]})},y=s(81),E=s(2982),_="MyPosts_item__Bkf2q",C="Post_item__apsvX",M=function(e){return(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)("img",{src:"https://img.lovepik.com/original_origin_pic/18/08/08/0aaca4059b482f768b87625f9fd241e3.png_wh860.png",alt:"avatar"}),e.message,(0,v.jsxs)("div",{children:["+",e.likes," Like"]})]})},Z=s(2268);var A=s(8687),D=(0,A.$j)((function(e){return{postsData:e.profilePage.posts,value:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e((0,y.Wl)(t))}}}))((function(e){console.log("RENDER MY POSTS"),console.log(e);var t=(0,E.Z)(e.postsData).reverse().map((function(e){return(0,v.jsx)(M,{message:e.message,likes:e.likesCount},e.id)}));return(0,v.jsxs)("div",{className:_,children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsx)("div",{children:(0,v.jsx)("div",{children:(0,v.jsx)(Z.l,{sendMessage:function(t){e.addPost(t)}})})}),t]})})),w=s(8388),N=function(e){var t=(0,A.v9)((function(e){return e.profilePage.status}));return console.log("RENDER PROFILE"),e.profile?(0,v.jsxs)("div",{children:[(0,v.jsx)(P,{imageLink:e.imageLink,profile:e.profile,status:t,updateUserStatus:e.updateUserStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,updateProfileData:e.updateProfileData,profileUpdateStatus:e.profileUpdateStatus,statusError:e.statusError,changeProfileUpdateStatusAC:e.changeProfileUpdateStatusAC}),(0,v.jsx)(D,{})]}):(0,v.jsx)(w.p,{})},F=s(7781),I=s(9271),O=s(2932),T=function(e){(0,a.Z)(s,e);var t=(0,n.Z)(s);function s(){return(0,o.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorisedUserId+"")||this.props.history.push("/login"),this.props.profileThunkCreator(+e),this.props.setUserStatus(+e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){e.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(N,(0,r.Z)((0,r.Z)({},this.props.profile),{},{updateUserStatus:this.props.updateUserStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,updateProfileData:this.props.updateProfileData,profileUpdateStatus:this.props.profileUpdateStatus,statusError:this.props.statusError,changeProfileUpdateStatusAC:this.props.changeProfileUpdateStatusAC}))})}}]),s}(l.Component),J=(0,F.qC)((0,A.$j)((function(e){return console.log("MapStateToProps change profile"),{profile:e.profilePage,authorisedUserId:e.auth.id,statusError:e.profilePage.statusError,profileUpdateStatus:e.profilePage.profileUpdateStatus}}),{profileThunkCreator:y.EP,setUserStatus:y.Ix,updateUserStatus:y.OG,savePhoto:y.EC,updateProfileData:y.bt,changeProfileUpdateStatusAC:y.g1}),O.e,I.EN)(T)},8389:function(e,t,s){e.exports=s.p+"static/media/pngtree-user-vector-avatar-png-image_1541962.5d9ea6317191df85e1b9.jpg"}}]);
//# sourceMappingURL=110.2a6fa628.chunk.js.map